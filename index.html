<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      data-i18n="meta.description"
      content="Transform your gaming experience with our team management app. Schedule matches, track stats, and coordinate with your team seamlessly."
    />

    <title data-i18n="meta.title">
      Gaming Team App - Level Up Your Gaming Experience
    </title>

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/x-icon"
      href="assets/images/favicon/favicon.ico"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="assets/images/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/images/favicon/favicon-32x32.png"
    />

    <!-- Preload Critical Resources -->
    <link
      rel="preload"
      href="assets/fonts/inter-var.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="assets/fonts/poppins-var.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link rel="preload" href="assets/images/hero-bg.webp" as="image" />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/css/normalize.css" />
    <link rel="stylesheet" href="assets/css/variables.css" />
    <link rel="stylesheet" href="assets/css/style.css" />

    <!-- Google Fonts Fallback -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Skip to main content for accessibility -->
    <a href="#main" class="skip-link" data-i18n="accessibility.skip_to_content">
      Skip to main content
    </a>

    <!-- Header component will be injected here -->
    <div id="header-component"></div>

    <!-- Main Content -->
    <main id="main">
      <!-- Components will be injected into these containers -->
      <div id="hero-component"></div>
      <div id="features-component"></div>
      <div id="problem-solution-component"></div>
      <div id="cta-component"></div>

      <!-- Feedback section -->
      <section class="feedback-section">
        <h2 data-i18n="feedback.title">Was this helpful?</h2>
        <div class="feedback-buttons">
          <button
            class="btn btn-ghost"
            data-feedback="yes"
            data-i18n="feedback.yes"
          >
            Yes
          </button>
          <button
            class="btn btn-ghost"
            data-feedback="no"
            data-i18n="feedback.no"
          >
            No
          </button>
        </div>
        <form id="feedback-form" class="feedback-form hidden">
          <textarea data-i18n-placeholder="feedback.textarea"></textarea>
          <button
            type="submit"
            class="btn btn-primary"
            data-i18n="feedback.submit"
          >
            Submit Feedback
          </button>
        </form>
      </section>
    </main>

    <!-- Footer component will be injected here -->
    <div id="footer-component"></div>

    <!-- Component Loader Script -->
    <script type="module">
      // Function to load HTML components
      async function loadComponent(elementId, componentPath) {
        try {
          const response = await fetch(componentPath);
          if (!response.ok) throw new Error(`Failed to load ${componentPath}`);
          const html = await response.text();
          document.getElementById(elementId).innerHTML = html;
        } catch (error) {
          console.error(`Error loading component ${componentPath}:`, error);
          document.getElementById("error-boundary").classList.remove("hidden");
        }
      }

      // Load all components
      document.addEventListener("DOMContentLoaded", async () => {
        const components = {
          "header-component": "components/header.html",
          "hero-component": "components/hero.html",
          "features-component": "components/features.html",
          "problem-solution-component": "components/problem-solution.html",
          "cta-component": "components/cta.html",
          "footer-component": "components/footer.html",
        };

        // Load components in parallel
        await Promise.all(
          Object.entries(components).map(([id, path]) =>
            loadComponent(id, path)
          )
        ).catch((error) => {
          console.error("Error loading components:", error);
          document.getElementById("error-boundary").classList.remove("hidden");
        });

        // Initialize components after loading
        window.dispatchEvent(new Event("componentsLoaded"));
      });
    </script>

    <!-- Main Scripts -->
    <script type="module" src="assets/js/i18n.js"></script>
    <script type="module" src="assets/js/main.js"></script>
    <script type="module" src="assets/js/analytics.js"></script>

    <!-- Error Boundary -->
    <div id="error-boundary" class="error-boundary hidden" role="alert">
      <p data-i18n="errors.generic">Something went wrong. Please try again.</p>
    </div>
  </body>
</html>
