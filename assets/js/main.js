import e from"https://cdn.skypack.dev/gsap";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t=new class{constructor(){this.currentLocale=localStorage.getItem("userLocale")||navigator.language.split("-")[0]||"fr",this.translations={},this.observers=new Set,this.defaultLocale="fr"}async init(){try{this.currentLocale!==this.defaultLocale&&(await this.loadTranslations(this.currentLocale),this.updatePageContent()),this.setupLanguageSwitcher()}catch(e){this.currentLocale=this.defaultLocale}}async loadTranslations(e){try{const t=window.location.pathname.startsWith("/")?window.location.pathname:"/"+window.location.pathname,a=`${t.replace(/\/index\.html$/,"").replace(/\/$/,"")}/locales/${e}.json`,r=await fetch(a,{headers:{Accept:"application/json","Cache-Control":"no-cache"}});if(r.ok)this.translations[e]=await r.json();else{const t=`/locales/${e}.json`,a=await fetch(t);if(!a.ok)throw new Error(`Failed to load translations. Status: ${r.status}`);this.translations[e]=await a.json()}if("object"!=typeof this.translations[e]||null===this.translations[e])throw new Error("Invalid translation file format");return this.currentLocale=e,this.translations[e]}catch(t){throw t}}translate(e,t={}){const a=e.split(".");let r=this.translations[this.currentLocale];for(const n of a)if(r=null==r?void 0:r[n],void 0===r){r=this.getFromDefaultLocale(e);break}return"string"!=typeof r?e:r.replace(/\{\{\s*(\w+)\s*\}\}/g,((e,a)=>void 0!==t[a]?t[a]:`{{${a}}}`))}getFromDefaultLocale(e){const t=e.split(".");let a=this.translations[this.defaultLocale];for(const r of t)if(a=null==a?void 0:a[r],void 0===a)return e;return a}async changeLocale(e){try{this.translations[e]||await this.loadTranslations(e),this.currentLocale=e,localStorage.setItem("userLocale",e),this.updatePageContent(),this.notifyObservers(),document.documentElement.lang=e}catch(t){throw t}}updatePageContent(){document.querySelectorAll("[data-i18n]").forEach((e=>{const t=e.getAttribute("data-i18n");e.textContent=this.translate(t)})),document.querySelectorAll("[data-i18n-placeholder]").forEach((e=>{const t=e.getAttribute("data-i18n-placeholder");e.placeholder=this.translate(t)})),document.querySelectorAll("[data-i18n-aria-label]").forEach((e=>{const t=e.getAttribute("data-i18n-aria-label");e.setAttribute("aria-label",this.translate(t))}))}setupLanguageSwitcher(){const e=document.querySelectorAll("#language-switcher, #language-selector");if(!e.length)return;const t=document.getElementById("language-selector");if(t){if(this.currentLocale){const e=t.options;if(null==e?void 0:e.length){const a=this.currentLocale.toString().toLowerCase(),r=Array.from(e).find((e=>e.value.toLowerCase()===a));r&&(t.value=r.value)}}e.forEach((a=>{t.value&&(a.value=t.value),a.addEventListener("change",(t=>{const a=t.target.value;e.forEach((e=>{e.value=a})),this.changeLocale(a)}))}))}}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}notifyObservers(){this.observers.forEach((e=>{try{e(this.currentLocale)}catch(t){}}))}};document.addEventListener("DOMContentLoaded",(()=>{t.init().catch((e=>{}))}));const{timeline:a}=e,r=document.querySelector(".transformer"),n=document.querySelector(".transformer__middle"),o=.2,s={};e.set(".number--next",{yPercent:-100,opacity:0}),e.set(".slap__line",{transformOrigin:"50% 50%",rotate:e=>45*e-45}),e.set(".slap__line path",{transformOrigin:"50% 50%",yPercent:-350,scaleY:.75}),e.set(".heart__segment",{opacity:0});const i=()=>a({onComplete:()=>{r.removeAttribute("disabled")}}).set(".transformer__feature",{"--hovered":1}).set(".bear-paw",{opacity:1}).set(".transformer__text",{yPercent:80,opacity:0}).add(a({}).set(".transformer__feature",{transition:"none"}).to(".transformer__feature",{keyframes:[{xPercent:-130,ease:"power1.out",duration:.125},{xPercent:20,ease:"power1.in",duration:.125},{xPercent:-20,delay:.1,ease:"power1.out",duration:.15}]}),.25).add(a().to(".paw--right",{keyframes:[{ease:"power1.in",xPercent:-175,yPercent:-125,duration:.25},{ease:"power1.out",delay:.15,duration:.35,xPercent:0,yPercent:0}]}),"<").add(e.timeline({onStart:()=>{s.CLAP.play(),e.set(".slap",{display:"block"})},onComplete:()=>{e.set(".slap",{display:"none"}),e.set(".slap__circle",{clearProps:"all"})}}).set(".slap__circle",{stroke:`hsl(${359*Math.random()}, 85%, 60%)`}).to(".slap__circle",{strokeWidth:0,scale:2.5,duration:.15,transformOrigin:"50% 50%"}).fromTo(".slap__line path",{strokeDashoffset:-11},{yPercent:-400,duration:.15,strokeDashoffset:11},0),">-0.5").add(e.timeline({repeatRefresh:!0,onStart:()=>{e.delayedCall(.25,(()=>s.CHEER.play())),e.set([".wiggle",".dashed__container",".burst"],{display:"block"})},onComplete:()=>{e.set([".wiggle",".dashed__container",".burst"],{display:"none"})}}).set(".celebration-line",{stroke:()=>`hsl(${359*Math.random()}, 100%, 70%)`}).set(".dashed__line",{yPercent:-120}).set(".dashed",{yPercent:0}).set(".burst",{"--rotate":()=>360*Math.random(),"--translate":()=>100*Math.random()+180}).set([".wiggle",".dashed__container"],{rotate:()=>360*Math.random()}).set([".wiggle__line",".dashed"],{yPercent:()=>150*Math.random()+180,scaleY:()=>Math.random()+.5}).fromTo(".dashed__line",{yPercent:-120},{yPercent:120,duration:.5},0).to(".dashed",{yPercent:"random(20, 100)"}).fromTo([".wiggle__line"],{strokeDashoffset:-32},{delay:()=>Math.random(),yPercent:"+=50",duration:.5,strokeDashoffset:32},0).fromTo(".burst__line path",{strokeDashoffset:-32},{delay:()=>.5*Math.random(),yPercent:"-=50",strokeDashoffset:32},0),"<").add(a({}).set(".bear-paw",{opacity:1}).to(document.documentElement,{"--backdrop-opacity":1,duration:o},0).to(document.documentElement,{"--stroke":"hsl(326, 56%, 85%)","--color":"hsl(204, 6%, 16%)",duration:o},0).to(".transformer__segment",{background:"hsl(327, 91%, 96%)",duration:o},0).to(".transformer__heart",{opacity:1,duration:o},0).to(".paw--left",{opacity:0,duration:o},0).to(".transformer__feature",{xPercent:-100,duration:o},0).to(".transformer__outline",{scaleX:.6,duration:o},0).to(".transformer__front",{x:n.offsetWidth/2,duration:o},0).to(".transformer__back",{x:-n.offsetWidth/2,duration:o},0).to(".number.number--current.number--single",{yPercent:100,opacity:0,duration:o},0).to(".number.number--next.number--single",{yPercent:0,duration:o,opacity:1},0).to(".heart__segment",{opacity:1,duration:o},0),"<+0.5").to(".transformer__heart",{scale:1.25,repeat:1,yoyo:!0,ease:"elastic.in"},">-0.2"),l=a({paused:!0,onStart:()=>{s.SIGH.play()},onComplete:()=>{e.set([".transformer__heart",".paw--left",".bear-paw"],{clearProps:"all"})}}).set([".transformer__feature",".transformer__text"],{clearProps:"all"}).to(".transformer__front",{x:0,duration:o}).to(".heart__segment",{opacity:0,duration:o},0).to(".transformer__outline",{scaleX:1,duration:o},0).to(".transformer__segment",{background:"hsl(0, 0%, 100%)",duration:o},0).to(".transformer__back",{x:0,duration:o},0).to(document.documentElement,{"--backdrop-opacity":0,"--stroke":"hsl(180, 3%, 94%)","--color":"hsl(180, 2%, 77%)",duration:o},0).to(".number.number--current.number--single",{yPercent:0,duration:o,opacity:1},0).to(".number.number--next.number--single",{yPercent:-100,duration:o,opacity:0},0).to(".paw--left",{opacity:1,duration:o},0).to(".transformer__heart",{opacity:0,duration:o},0);r.addEventListener("pointerdown",(({x:t,y:a})=>{if(!r.hasAttribute("disabled"))if("true"===r.getAttribute("aria-pressed"))r.setAttribute("aria-pressed",!1),l.restart();else{r.setAttribute("aria-pressed",!0),r.setAttribute("disabled",!0);const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","circle"),s=r.getBoundingClientRect();e.set(n,{height:50,width:50,left:t-s.left-25,top:a-s.top-25,overflow:"visible !important",zIndex:12,transformOrigin:"50% 50%",position:"absolute",attr:{viewBox:"0 0 100 100",fill:"none"}}),n.appendChild(o),r.appendChild(n),e.set(o,{attr:{r:30,cx:50,cy:50},stroke:`hsl(${359*Math.random()}, 80%, 50%)`,strokeWidth:20}),e.timeline({onStart:()=>i(),onComplete:()=>n.remove()}).fromTo(o,{scale:0,transformOrigin:"50% 50%"},{scale:1.25,duration:.2}).to(o,{opacity:0,duration:.1},">-0.1")}}));document.addEventListener("pointermove",(({x:t,y:a})=>{const r=e.utils.mapRange(0,window.innerWidth,-5,5,t),n=e.utils.mapRange(0,window.innerHeight,-5,5,a);e.set(document.documentElement,{"--x":r,"--mx":t,"--y":n,"--my":a})})),e.set(".transformer",{display:"block"});const c="https://script.google.com/macros/s/AKfycbxgJ8z5Q0M7Wpvz4HqWripAjMiwPtu2orkVTXkeeQeLw3K5ZdaV6xtsyWlr5PsGxXw0/exec";const d=new class{constructor(){this.isInitialized=!1}init(){if(!this.isInitialized)try{this.elements={header:document.getElementById("header-component"),mobileMenu:{button:document.querySelector(".menu-toggle"),nav:document.querySelector("#primary-navigation")},signupForm:document.querySelector("#signup-form"),feedbackSection:{buttons:document.querySelectorAll("[data-feedback]"),form:document.querySelector("#feedback-form")},demoButton:document.querySelector('[data-i18n="hero.cta_secondary"]')},this.state={lastScrollPosition:0,isHeaderVisible:!0,isMobileMenuOpen:!1,hasSubmittedFeedback:!1},this.setupEventListeners(),this.setupIntersectionObserver(),this.setupFormValidation(),this.setupScrollEffects()}catch(e){}finally{this.isInitialized=!0}}setupScrollEffects(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void document.querySelectorAll(".animate-on-scroll").forEach((e=>{e.classList.remove("animate-on-scroll"),e.classList.add("animated")}));let e;document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(t=>{var a;const r=e.getAttribute("href");if("#"===r)return;const n=document.querySelector(r);if(n){t.preventDefault();const e=(null==(a=this.elements.header)?void 0:a.offsetHeight)||0,o=n.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:o,behavior:"smooth"}),history.pushState(null,"",r)}}))}));let t=window.pageYOffset,a=Date.now();const r=()=>{const r=window.pageYOffset,n=Date.now();if(n-a>100&&Math.abs(r-t)>50){const e=this.elements.header;e&&(r>t&&r>e.offsetHeight?e.classList.contains("header-hidden")||(e.classList.add("header-hidden"),this.state.isHeaderVisible=!1):(r<t||r<=e.offsetHeight)&&e.classList.contains("header-hidden")&&(e.classList.remove("header-hidden"),this.state.isHeaderVisible=!0)),t=r,a=n}e=null};window.addEventListener("scroll",(()=>{e||(e=setTimeout(r,16))}),{passive:!0}),window.location.hash&&setTimeout((()=>{var e;const t=document.querySelector(window.location.hash);if(t){const a=(null==(e=this.elements.header)?void 0:e.offsetHeight)||0,r=t.getBoundingClientRect().top+window.pageYOffset-a;window.scrollTo({top:r,behavior:"smooth"})}}),100)}setupEventListeners(){var e,t,a;this.elements.mobileMenu.button,null==(e=this.elements.mobileMenu.button)||e.addEventListener("click",(()=>this.toggleMobileMenu())),this.elements.signupForm,null==(t=this.elements.signupForm)||t.addEventListener("submit",(e=>this.handleSignupSubmit(e))),this.elements.feedbackSection.form,this.elements.feedbackSection.buttons.forEach((e=>{e.addEventListener("click",(()=>this.handleFeedbackClick(e)))})),null==(a=this.elements.feedbackSection.form)||a.addEventListener("submit",(e=>this.handleFeedbackSubmit(e))),this.handleScroll=this.debounce(this.handleScroll.bind(this),10),window.addEventListener("scroll",this.handleScroll),this.handleResize=this.debounce(this.handleResize.bind(this),150),window.addEventListener("resize",this.handleResize),document.addEventListener("keydown",(e=>this.handleEscapeKey(e))),document.addEventListener("click",(e=>this.handleClickOutside(e)))}setupIntersectionObserver(){const e=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(t.target.classList.add("animated"),e.unobserve(t.target))}))}),{root:null,rootMargin:"0px",threshold:.1});document.querySelectorAll(".animate-on-scroll").forEach((t=>{e.observe(t)}))}setupFormValidation(){if(!this.elements.signupForm)return;this.elements.signupForm.querySelectorAll("input[required]").forEach((e=>{e.addEventListener("input",(()=>this.validateInput(e))),e.addEventListener("blur",(()=>this.validateInput(e)))}))}validateInput(e){const a=e.value.trim();let r=!0,n="";switch(e.type){case"email":r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),n=t.translate("form.email.error");break;case"text":r=a.length>=2,n=t.translate("form.team_name.error")}const o=e.parentElement.querySelector(".error-message");return o&&(o.textContent=r?"":n),e.setAttribute("aria-invalid",!r),r}async handleSignupSubmit(e){e.preventDefault();const t=e.target,a=t.querySelectorAll("input[required]");let r=!0;if(a.forEach((e=>{this.validateInput(e)||(r=!1)})),!r)return;const n=t.querySelector('button[type="submit"]');n.disabled=!0,n.classList.add("loading");try{const e=new FormData(t),a=Object.fromEntries(e.entries()),r="callback_"+Date.now(),n=new URLSearchParams({...a,callback:r}).toString(),o=`${c}?${n}`,s=new Promise(((e,t)=>{window[r]=t=>{e(t),delete window[r],document.head.removeChild(a)};const a=document.createElement("script");a.src=o,a.onerror=()=>{t(new Error("Script loading failed")),delete window[r],document.head.removeChild(a)},document.head.appendChild(a)})),i=await s;if(!i.success)throw new Error(i.error||"Failed to submit feedback");t.reset()}catch(o){try{await fetch(c,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)});t.reset()}catch(s){}}finally{n.disabled=!1,n.classList.remove("loading")}}handleFeedbackClick(e){if(this.state.hasSubmittedFeedback)return;const t=e.dataset.feedback,a=this.elements.feedbackSection.form;this.submitFeedback({type:t}),a.classList.remove("hidden"),a.querySelector("textarea").focus()}async handleFeedbackSubmit(e){e.preventDefault();const t=e.target.querySelector("textarea").value.trim();if(t)try{await this.submitFeedback({type:button.dataset.feedback||"error",feedback:t})}catch(a){}}async submitFeedback(e){const t=await fetch(c,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to submit feedback");localStorage.setItem("feedbackSubmitted","true"),this.state.hasSubmittedFeedback=!0}toggleMobileMenu(){const{button:e,nav:t}=this.elements.mobileMenu,a="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!a),t.classList.toggle("active"),this.state.isMobileMenuOpen=!a,document.body.style.overflow=a?"":"hidden"}handleScroll(){if(!this.elements.header)return void window.removeEventListener("scroll",this.handleScroll);const e=window.pageYOffset;e>this.state.lastScrollPosition&&e>100?this.state.isHeaderVisible&&requestAnimationFrame((()=>{this.elements.header.classList.add("header-hidden"),this.state.isHeaderVisible=!1})):this.state.isHeaderVisible||requestAnimationFrame((()=>{this.elements.header.classList.remove("header-hidden"),this.state.isHeaderVisible=!0})),this.state.lastScrollPosition=e}handleResize(){window.innerWidth>=768&&this.state.isMobileMenuOpen&&this.toggleMobileMenu()}handleEscapeKey(e){"Escape"===e.key&&this.state.isMobileMenuOpen&&this.toggleMobileMenu()}handleClickOutside(e){!this.state.isMobileMenuOpen||this.elements.mobileMenu.nav.contains(e.target)||this.elements.mobileMenu.button.contains(e.target)||this.toggleMobileMenu()}showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`,a.setAttribute("role","alert"),a.textContent=t,document.body.appendChild(a),setTimeout((()=>{a.classList.add("fade-out"),setTimeout((()=>{document.body.removeChild(a)}),300)}),5e3)}simulateApiCall(e){return new Promise((e=>{setTimeout(e,1e3)}))}debounce(e,t){let a;return function(...r){clearTimeout(a),a=setTimeout((()=>{clearTimeout(a),e(...r)}),t)}}};document.addEventListener("DOMContentLoaded",(()=>{d.init()}));
